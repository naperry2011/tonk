<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tonk Card Game</title>
  <link rel="stylesheet" href="/styles/main.css">
  <link rel="stylesheet" href="/styles/cards.css">
  <link rel="stylesheet" href="/styles/layout.css">
  <link rel="stylesheet" href="/styles/themes.css">
</head>
<body>
  <div id="game-container">
    <header id="game-header">
      <div id="header-left">
        <h1>TONK</h1>
        <button id="btn-rules">Rules</button>
        <button id="btn-settings">Settings</button>
      </div>
      <div id="match-scores"></div>
      <div id="chips-and-pot">
        <div id="chip-display" role="status" aria-label="Your chips">
          <span class="chip-icon" aria-hidden="true"></span>
          <span id="player-chips" aria-live="polite">1000</span>
        </div>
        <div id="pot-display" role="status" aria-label="Current pot">
          <span class="pot-label" aria-hidden="true">Pot</span>
          <span id="pot-amount" aria-live="polite">0</span>
        </div>
      </div>
    </header>

    <div id="opponent-area">
      <!-- AI player hands rendered here (top position) -->
    </div>

    <div class="opponent-left-area">
      <!-- Left side opponent for 4-player layout -->
    </div>

    <div id="table-area">
      <div id="spreads-area"></div>
      <div id="deck-area">
        <div id="deck" class="card-stack" role="button" tabindex="0" aria-label="Draw from deck">
          <div class="card card-back" aria-hidden="true"></div>
          <span id="deck-count" aria-live="polite"></span>
        </div>
        <div id="discard-pile" class="card-stack" role="button" tabindex="0" aria-label="Draw from discard pile">
          <span id="discard-label" aria-hidden="true">Discard</span>
        </div>
      </div>
    </div>

    <div class="opponent-right-area">
      <!-- Right side opponent for 4-player layout -->
    </div>

    <div id="player-area">
      <div id="player-info">
        <span id="player-name">Your Hand</span>
        <span id="card-count">Cards: 0</span>
        <span id="point-count">Points: 0</span>
      </div>
      <div id="player-hand"></div>
    </div>

    <div id="action-buttons" role="toolbar" aria-label="Game actions">
      <button id="btn-form-spread" disabled aria-label="Form spread from selected cards">Spread</button>
      <button id="btn-hit-spread" disabled aria-label="Add selected card to existing spread">Hit</button>
      <button id="btn-knock" disabled aria-label="Drop and end round">Drop</button>
      <button id="btn-draw" disabled aria-label="Draw card from deck">Draw</button>
      <button id="btn-discard" disabled aria-label="Discard selected card">Discard</button>
      <button id="betting-toggle" aria-label="Toggle betting options">Raise Bet</button>
      <div id="betting-controls" role="group" aria-label="Betting options">
        <span class="bet-label" aria-hidden="true">Raise:</span>
        <button class="raise-btn" data-amount="10" disabled aria-label="Raise bet by 10 chips">+10</button>
        <button class="raise-btn" data-amount="25" disabled aria-label="Raise bet by 25 chips">+25</button>
        <button class="raise-btn" data-amount="50" disabled aria-label="Raise bet by 50 chips">+50</button>
        <button class="raise-btn" data-amount="100" disabled aria-label="Raise bet by 100 chips">+100</button>
      </div>
    </div>

    <div id="message-area"></div>

    <div id="game-over-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="game-over-title">
      <div class="modal-content">
        <h2 id="game-over-title"></h2>
        <p id="game-over-message"></p>
        <div id="final-scores"></div>
        <div id="game-over-buttons">
          <button id="btn-continue-round" class="hidden">Continue</button>
          <button id="btn-new-game">New Game</button>
        </div>
      </div>
    </div>

    <div id="rules-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="rules-title">
      <div class="modal-content rules-content">
        <button id="btn-close-rules" class="modal-close" aria-label="Close rules">&times;</button>
        <h2 id="rules-title">Tonk Rules</h2>

        <h3>Objective</h3>
        <p>Be the first to get rid of all your cards or have the lowest point total when someone drops. First player to reach 100 points loses the match!</p>

        <h3>Card Values</h3>
        <ul>
          <li><strong>Ace:</strong> 1 point</li>
          <li><strong>2-10:</strong> Face value</li>
          <li><strong>J, Q, K:</strong> 10 points each</li>
        </ul>

        <h3>Turn Flow</h3>
        <ol>
          <li><strong>Start of Turn:</strong> You may form spreads, hit existing spreads, or drop</li>
          <li><strong>Draw:</strong> Draw one card from the deck or discard pile</li>
          <li><strong>Action:</strong> Form spreads, hit spreads, then discard one card to end your turn</li>
        </ol>

        <h3>Spreads</h3>
        <ul>
          <li><strong>Book:</strong> 3 or 4 cards of the same rank (e.g., 7-7-7)</li>
          <li><strong>Run:</strong> 3+ cards of the same suit in sequence (e.g., 4-5-6 of Hearts). Ace is low only.</li>
        </ul>
        <p>You can "hit" existing spreads by adding matching cards to them.</p>

        <h3>Dropping (Knocking)</h3>
        <p>At the start of your turn (before drawing), you may drop claiming lowest points. All hands are revealed:</p>
        <ul>
          <li>If you have the lowest points, you win the round</li>
          <li>If someone else has equal or lower points, they win (you got "caught")</li>
        </ul>

        <h3>Winning</h3>
        <ul>
          <li><strong>Tonk:</strong> Empty your hand by laying spreads/hitting</li>
          <li><strong>Initial Tonk:</strong> Start with 49 or 50 points - automatic win! (If multiple players have it, cards are redealt)</li>
          <li><strong>Drop:</strong> Have the lowest points when you drop</li>
          <li><strong>Stock Empty:</strong> When the deck runs out and you can't draw, lowest points wins</li>
        </ul>

        <h3>Match Scoring</h3>
        <p>When a round ends, the loser(s) add their hand points to their match total. First player to 100 points loses the match!</p>
      </div>
    </div>

    <div id="settings-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="settings-title">
      <div class="modal-content">
        <button id="btn-close-settings" class="modal-close" aria-label="Close settings">&times;</button>
        <h2 id="settings-title">Settings</h2>

        <div class="settings-section">
          <h3>Deck Style</h3>
          <div class="theme-options" role="radiogroup" aria-label="Deck style options">
            <div class="theme-option" data-theme="classic" role="radio" tabindex="0" aria-checked="false" aria-label="Classic deck style">
              <div class="theme-preview theme-classic"></div>
              <span>Classic</span>
            </div>
            <div class="theme-option" data-theme="royal" role="radio" tabindex="0" aria-checked="false" aria-label="Royal deck style">
              <div class="theme-preview theme-royal"></div>
              <span>Royal</span>
            </div>
            <div class="theme-option" data-theme="midnight" role="radio" tabindex="0" aria-checked="false" aria-label="Midnight deck style">
              <div class="theme-preview theme-midnight"></div>
              <span>Midnight</span>
            </div>
            <div class="theme-option" data-theme="emerald" role="radio" tabindex="0" aria-checked="false" aria-label="Emerald deck style">
              <div class="theme-preview theme-emerald"></div>
              <span>Emerald</span>
            </div>
            <div class="theme-option" data-theme="crimson" role="radio" tabindex="0" aria-checked="false" aria-label="Crimson deck style">
              <div class="theme-preview theme-crimson"></div>
              <span>Crimson</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="start-screen">
      <div class="landing-content">
        <h1 class="landing-title">TONK</h1>
        <p class="landing-subtitle">A classic card game</p>
        <div class="landing-divider"></div>
        <div id="player-select">
          <label for="num-players">Number of Players:</label>
          <select id="num-players">
            <option value="2">2 Players (You + 1 AI)</option>
            <option value="3">3 Players (You + 2 AI)</option>
            <option value="4">4 Players (You + 3 AI)</option>
          </select>
        </div>
        <button id="btn-start-game">Start Game</button>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>
</html>
